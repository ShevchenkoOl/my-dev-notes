// API (Application Programming Interface â€” Ñ–Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼ÑƒÐ²Ð°Ð½Ð½Ñ Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº) â€” Ñ†Ðµ Ð½Ð°Ð±Ñ–Ñ€ Ð¿Ñ€Ð°Ð²Ð¸Ð» Ñ– Ð¼ÐµÑ‚Ð¾Ð´Ñ–Ð², Ð· Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð¾ÑŽ ÑÐºÐ¸Ñ… Ð¾Ð´Ð½Ð° Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð° Ð¼Ð¾Ð¶Ðµ Ð²Ð·Ð°Ñ”Ð¼Ð¾Ð´Ñ–ÑÑ‚Ð¸ Ð· Ñ–Ð½ÑˆÐ¾ÑŽ.
// ðŸ‘‰ ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´:
//            - Ð£ Ñ‚ÐµÐ±Ðµ Ñ” Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº-Ð¿Ð¾Ð³Ð¾Ð´Ð°. Ð’Ñ–Ð½ Ð½Ðµ Ð·Ð±Ð¸Ñ€Ð°Ñ” Ð´Ð°Ð½Ñ– ÑÐ°Ð¼, Ð° Ð·Ð²ÐµÑ€Ñ‚Ð°Ñ”Ñ‚ÑŒÑÑ Ð´Ð¾ API Ð¿Ð¾Ð³Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ñ–ÑÑƒ Ñ– Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÑ” Ð´Ð°Ð½Ñ– (Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñƒ, Ð²Ð¾Ð»Ð¾Ð³Ñ–ÑÑ‚ÑŒ Ñ‚Ð¾Ñ‰Ð¾). Ð¢Ð¸, ÑÐº Ñ€Ð¾Ð·Ñ€Ð¾Ð±Ð½Ð¸Ðº, Ð¼Ð¾Ð¶ÐµÑˆ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ñ†ÐµÐ¹ API, Ñ‰Ð¾Ð± Ð²Ð±ÑƒÐ´ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ð¾Ð³Ð¾Ð´Ñƒ Ð² ÑÐ²Ð¾Ñ” Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº.

// REST API â€” Ñ†Ðµ Ð¾Ð´Ð¸Ð½ Ð· Ð²Ð¸Ð´Ñ–Ð² API, Ð¾ÑÐ½Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð½Ð° Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð°Ñ… REST (Representational State Transfer). Ð’Ñ–Ð½ Ñ‡Ð°ÑÑ‚Ñ–ÑˆÐµ Ð·Ð° Ð²ÑÐµ Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ñ‡ÐµÑ€ÐµÐ· HTTP (ÑÐº Ð·Ð²Ð¸Ñ‡Ð°Ð¹Ð½Ñ– ÑÐ°Ð¹Ñ‚Ð¸). Ð°Ð±Ð¾ Ñ†Ðµ Ð½Ð°Ð±Ñ–Ñ€ Ð¿Ñ€Ð°Ð²Ð¸Ð» Ð°Ð±Ð¾ Ð¼ÐµÑ‚Ð¾Ð´Ñ–Ð², Ñ‰Ð¾ Ð´Ð°ÑŽÑ‚ÑŒ Ð·Ð¼Ð¾Ð³Ñƒ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð°Ð¼ (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ñƒ Ð°Ð±Ð¾ Ð¼Ð¾Ð±Ñ–Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð·Ð°ÑÑ‚Ð¾ÑÑƒÐ½ÐºÑƒ) Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚Ð¸ HTTP-Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ (GET, POST, PUT, DELETE) Ð´Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð° Ñ‚Ð° Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÐ²Ð°Ñ‚Ð¸ Ð´Ð°Ð½Ñ– Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– JSON Ð°Ð±Ð¾ XML.

// Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ñ– Ð²Ð¸Ð´Ð¸ API:
// ðŸ”¹ 1. REST API: ÐžÑÐ½Ð¾Ð²Ð°Ð½ Ð½Ð° HTTP Ñ– Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð°Ñ… REST, Ð§Ð°ÑÑ‚Ñ–ÑˆÐµ Ð·Ð° Ð²ÑÐµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ñ‚ÑŒÑÑ Ñƒ Ð²ÐµÐ±-Ñ€Ð¾Ð·Ñ€Ð¾Ð±Ñ†Ñ–, ÐŸÑ€Ð¾ÑÑ‚Ð¸Ð¹ Ñ– Ð·Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ð»Ð¸Ð¹. ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´Ð¸: GitHub API, Telegram Bot API

// ðŸ”¹ 2. SOAP API (Simple Object Access Protocol): Ð‘Ñ–Ð»ÑŒÑˆ ÑÑ‚Ñ€Ð¾Ð³Ð¸Ð¹ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚ Ð¿Ð¾Ñ€Ñ–Ð²Ð½ÑÐ½Ð¾ Ð· REST, // Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ” XML Ð´Ð»Ñ Ð¾Ð±Ð¼Ñ–Ð½Ñƒ Ð´Ð°Ð½Ð¸Ð¼Ð¸, Ð’Ð¸Ð¼Ð°Ð³Ð°Ñ” WSDL (Ð¾Ð¿Ð¸ÑÑƒ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸). ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´Ð¸: ÑÑ‚Ð°Ñ€Ñ– Ð±Ð°Ð½ÐºÑ–Ð²ÑÑŒÐºÑ– Ñ– ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ– ÑÐµÑ€Ð²Ñ–ÑÐ¸ - ðŸ› ï¸ Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ñ‚ÑŒÑÑ, ÐºÐ¾Ð»Ð¸ Ð²Ð°Ð¶Ð»Ð¸Ð²Ñ– Ð±ÐµÐ·Ð¿ÐµÐºÐ° Ñ– ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð¸Ð·Ð°Ñ†Ñ–Ñ

// ðŸ”¹ 3. GraphQL API: Ð Ð¾Ð·Ñ€Ð¾Ð±Ð»ÐµÐ½Ð¸Ð¹ Facebook ÑÐº Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð° REST, ÐšÐ»Ñ–Ñ”Ð½Ñ‚ ÑÐ°Ð¼ Ð²Ð¸Ð±Ð¸Ñ€Ð°Ñ”, ÑÐºÑ– Ð¿Ð¾Ð»Ñ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ñ‚Ð¸, ÐžÐ´Ð¸Ð½ endpoint Ð·Ð°Ð¼Ñ–ÑÑ‚ÑŒ Ð±Ð°Ð³Ð°Ñ‚ÑŒÐ¾Ñ…, Ð”Ð°Ð½Ñ– Ð¿Ñ€Ð¸Ñ…Ð¾Ð´ÑÑ‚ÑŒ Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– JSON. ÐŸÐµÑ€ÐµÐ²Ð°Ð³Ð°: Ð¼ÐµÐ½ÑˆÐµ Ð´Ð°Ð½Ð¸Ñ… Ð¿ÐµÑ€ÐµÐ´Ð°Ñ”Ñ‚ÑŒÑÑ, Ð³Ð½ÑƒÑ‡ÐºÑ–ÑˆÐµ Ð´Ð»Ñ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°

// ðŸ”¹ 4. WebSocket API: ÐŸÐ¾ÑÑ‚Ñ–Ð¹Ð½Ðµ Ð´Ð²Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð½Ð½Ñ” Ð·'Ñ”Ð´Ð½Ð°Ð½Ð½Ñ Ð¼Ñ–Ð¶ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð¾Ð¼ Ñ– ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð¼, Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ñ‚ÑŒÑÑ Ð´Ð»Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‡Ð°ÑÑƒ: Ñ‡Ð°Ñ‚Ð¸, Ñ–Ð³Ñ€Ð¸, Ð±Ñ–Ñ€Ð¶Ñ–, ÐŸÑ€Ð°Ñ†ÑŽÑ” Ð¿Ð¾Ð²ÐµÑ€Ñ… TCP, Ð° Ð½Ðµ ÑÐº Ð·Ð²Ð¸Ñ‡Ð°Ð¹Ð½Ñ– HTTP-Ð·Ð°Ð¿Ð¸Ñ‚Ð¸

// ðŸ”¹ 5. gRPC (Google Remote Procedure Call): Ð Ð¾Ð·Ñ€Ð¾Ð±Ð»ÐµÐ½Ð¸Ð¹ Google, Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ” protobuf (Ð° Ð½Ðµ JSON Ð°Ð±Ð¾ XML), Ð”ÑƒÐ¶Ðµ ÑˆÐ²Ð¸Ð´ÐºÐ¸Ð¹, Ð¿Ñ–Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð´Ð»Ñ Ð¼Ñ–ÐºÑ€Ð¾ÑÐµÑ€Ð²Ñ–ÑÑ–Ð². Ð§Ð°ÑÑ‚Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ñ‚ÑŒÑÑ Ð²ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ– Ð²ÐµÐ»Ð¸ÐºÐ¸Ñ… backend-ÑÐ¸ÑÑ‚ÐµÐ¼

// ðŸ”¹ 6. SDK/API Ñ‡ÐµÑ€ÐµÐ· Ð±Ñ–Ð±Ð»Ñ–Ð¾Ñ‚ÐµÐºÐ¸: Ð¦Ðµ Ð¼Ð¾Ð¶Ðµ Ð±ÑƒÑ‚Ð¸ API Ð²ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ– Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸ Ð°Ð±Ð¾ Ñ„Ñ€ÐµÐ¹Ð¼Ð²Ð¾Ñ€ÐºÐ°, Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹ Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ð´. ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´Ð¸: DOM API Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ñ–, Java API (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, File, Scanner), Python API Ð±Ñ–Ð±Ð»Ñ–Ð¾Ñ‚ÐµÐºÐ¸ Pandas, Tkinter

// ðŸ”¹ 7. ÐžÐ¿ÐµÑ€Ð°Ñ†Ñ–Ð¹Ð½Ñ– ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ– API: Ð¦Ðµ Ñ–Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¸, Ñ‡ÐµÑ€ÐµÐ· ÑÐºÑ– Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¸ ÑÐ¿Ñ–Ð»ÐºÑƒÑŽÑ‚ÑŒÑÑ Ð· Ð¾Ð¿ÐµÑ€Ð°Ñ†Ñ–Ð¹Ð½Ð¾ÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾ÑŽ. ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´Ð¸: Windows API, POSIX API (Ð´Ð»Ñ Unix-Ð¿Ð¾Ð´Ñ–Ð±Ð½Ð¸Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼)


// ÐŸÑ€Ð¾Ð¼Ñ–Ð¶Ð½Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð½Ðµ Ð·Ð°Ð±ÐµÐ·Ð¿ÐµÑ‡ÐµÐ½Ð½Ñ (middleware):
// Middleware â€” Ñ†Ðµ Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ—, ÑÐºÑ– Ð²Ð¸ÐºÐ¾Ð½ÑƒÑŽÑ‚ÑŒÑÑ Ð¿Ñ–Ð´ Ñ‡Ð°Ñ Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ Ð´Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°, Ð°Ð»Ðµ Ð¿ÐµÑ€ÐµÐ´ Ñ‚Ð¸Ð¼, ÑÐº Ð±ÑƒÐ´Ðµ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð° Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´ÑŒ.
import express from "express";
import moment from "moment"; // Ð‘Ñ–Ð±Ð»Ñ–Ð¾Ñ‚ÐµÐºÐ° Moment.js Ð´Ð»Ñ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð· Ð´Ð°Ñ‚Ð°Ð¼Ð¸ Ð°Ð»Ðµ Ð²Ð¾Ð½Ð° Ñ‚Ñ€Ð¾Ð·Ð¸ Ð·Ð°ÑÑ‚Ð°Ñ€Ñ–Ð»Ð° Ñ– ÐºÑ€Ð°Ñ‰Ðµ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ date-fns Ð°Ð±Ð¾ luxon
const app = express();
// ÐÐ°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ middleware Ð´Ð»Ñ Ð»Ð¾Ð³ÑƒÐ²Ð°Ð½Ð½Ñ Ð·Ð°Ð¿Ð¸Ñ‚Ñ–Ð², Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº Ð°Ð±Ð¾ Ð°Ð²Ñ‚ÐµÐ½Ñ‚Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–Ñ— ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñ–Ð².
app.use(async(req, res, next) => {   // next() â€” Ñ†Ðµ Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ, ÑÐºÐ° Ð¿ÐµÑ€ÐµÐ´Ð°Ñ” ÑƒÐ¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð¾Ð¼Ñƒ middleware Ð°Ð±Ð¾ Ð¾Ð±Ñ€Ð¾Ð±Ð½Ð¸ÐºÑƒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñƒ. Ð¯ÐºÑ‰Ð¾ Ð½Ðµ Ð±ÑƒÐ´Ðµ next(), Ð·Ð°Ð¿Ð¸Ñ‚ "Ð·Ð°Ð²Ð¸ÑÐ½Ðµ", Ñ‚Ð¾Ð±Ñ‚Ð¾ ÑÐµÑ€Ð²ÐµÑ€ Ð²Ð¸ÐºÐ¾Ð½Ð°Ñ” Ñ†ÐµÐ¹ Ð·Ð°Ð¿Ð¸Ñ‚ Ñ– Ð·ÑƒÐ¿Ð¸Ð½Ð¸Ð¸ÑŒÑÑ, Ð° Ð´Ð¾ ÑÐ²Ð¾Ð³Ð¾ Ð¼Ð°Ñ€ÑˆÐ¿ÐºÑ‚Ðº ÑÐºÐ¸Ð¹ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ Ð½Ðµ Ð´Ñ–Ð¹Ð´Ðµ.
  
    // Ð¢ÑƒÑ‚ Ð¼Ð¾Ð¶Ð½Ð° Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ð»Ð¾Ð³Ñ–ÐºÑƒ, Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð»Ð¾Ð³ÑƒÐ²Ð°Ð½Ð½Ñ Ð·Ð°Ð¿Ð¸Ñ‚Ñ–Ð²
    const { method, url } = req;
    console.log(`Ð—Ð°Ð¿Ð¸Ñ‚: ${req.method} ${req.url}`);
    const date = moment().format("YYYY-MM-DD HH:mm:ss"); // moment() Ð¿Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð· Ð±Ñ–Ð±Ð»Ñ–Ð¾Ñ‚ÐµÐºÐ¸ Moment.js â€” Ñ†Ðµ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ð° Ð±Ñ–Ð±Ð»Ñ–Ð¾Ñ‚ÐµÐºÐ° JavaScript Ð´Ð»Ñ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð· Ð´Ð°Ñ‚Ð°Ð¼Ð¸ Ñ‚Ð° Ñ‡Ð°ÑÐ¾Ð¼. moment() â€” Ñ†Ðµ Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ, ÑÐºÐ° ÑÑ‚Ð²Ð¾Ñ€ÑŽÑ” Ð¾Ð±'Ñ”ÐºÑ‚ Ð´Ð°Ñ‚Ð¸/Ñ‡Ð°ÑÑƒ. Ð’Ð¾Ð½Ð° Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑ” Ð»ÐµÐ³ÐºÐ¾: Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÐ²Ð°Ñ‚Ð¸ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ñƒ Ð´Ð°Ñ‚Ñƒ Ð¹ Ñ‡Ð°Ñ; Ð¿Ð°Ñ€ÑÐ¸Ñ‚Ð¸ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– Ð´Ð°Ñ‚Ð¸; Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ÑƒÐ²Ð°Ñ‚Ð¸ Ð´Ð°Ñ‚Ñƒ Ð² Ð·Ñ€ÑƒÑ‡Ð½Ð¸Ð¹ Ð²Ð¸Ð³Ð»ÑÐ´; Ð´Ð¾Ð´Ð°Ð²Ð°Ñ‚Ð¸/Ð²Ñ–Ð´Ð½Ñ–Ð¼Ð°Ñ‚Ð¸ Ð´Ð½Ñ–, Ð¼Ñ–ÑÑÑ†Ñ–, Ñ€Ð¾ÐºÐ¸ Ñ‚Ð¾Ñ‰Ð¾.
    try {
        await fs.appendFile("./public/logs.txt", `${date} - ${method} ${url}\n`); // fs.appendFile â€” Ñ†Ðµ Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ Ð· Ð¼Ð¾Ð´ÑƒÐ»Ñ fs (file system), ÑÐºÐ° Ð´Ð¾Ð´Ð°Ñ” Ñ‚ÐµÐºÑÑ‚ Ð´Ð¾ Ñ„Ð°Ð¹Ð»Ñƒ. Ð¯ÐºÑ‰Ð¾ Ñ„Ð°Ð¹Ð» Ð½Ðµ Ñ–ÑÐ½ÑƒÑ”, Ð²Ñ–Ð½ Ð±ÑƒÐ´Ðµ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð¸Ð¹. Ð£ Ð½Ð°ÑˆÐ¾Ð¼Ñƒ Ð²Ð¸Ð¿Ð°Ð´ÐºÑƒ Ð¼Ð¸ Ð·Ð°Ð¿Ð¸ÑÑƒÑ”Ð¼Ð¾ Ð´Ð°Ñ‚Ñƒ, Ð¼ÐµÑ‚Ð¾Ð´ Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ Ñ‚Ð° URL Ñƒ Ñ„Ð°Ð¹Ð» logs.txt.
    } catch (error) {
        console.error("ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð·Ð°Ð¿Ð¸ÑÑƒ Ð² Ð»Ð¾Ð³:", error);
    }
    next();
}); // - Ð›Ð¾Ð³ÑƒÐ²Ð°Ð½Ð½Ñ HTTP-Ð·Ð°Ð¿Ð¸Ñ‚Ñ–Ð² â€” Ñ†Ðµ Ð¾Ð´Ð½Ð° Ð· Ð¾ÑÐ½Ð¾Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð¼Ð¾Ð½Ñ–Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ñƒ Ñ‚Ð° Ð´Ñ–Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸. ÐžÑÑŒ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ– Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð¸, Ñ‡Ð¾Ð¼Ñƒ Ñ†Ðµ Ñ€Ð¾Ð±Ð»ÑÑ‚ÑŒ:
// âœ… 1. Ð’Ð¸ÑÐ²Ð»ÐµÐ½Ð½Ñ Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº
//       Ð¯ÐºÑ‰Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÑÑ” Ð¿Ñ€Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ, Ñ‚Ð¸ Ð¼Ð¾Ð¶ÐµÑˆ: Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ½ÑƒÑ‚Ð¸ Ð»Ð¾Ð³, Ð¿Ð¾Ð±Ð°Ñ‡Ð¸Ñ‚Ð¸, ÑÐºÑ– Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð½Ð°Ð´Ñ…Ð¾Ð´Ð¸Ð»Ð¸,ÑÐºÑ– ÑÐ°Ð¼Ðµ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ñ– Ð²Ñ–Ð´Ð´Ð°Ð²Ð°Ð² ÑÐµÑ€Ð²ÐµÑ€, Ñ– Ð·Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸, Ñ‰Ð¾ Ð¿Ñ–ÑˆÐ»Ð¾ Ð½Ðµ Ñ‚Ð°Ðº.
// âœ… 2. ÐÐ½Ð°Ð»Ñ–Ð· Ð±ÐµÐ·Ð¿ÐµÐºÐ¸
//       Ð›Ð¾Ð³Ð¸ Ð¼Ð¾Ð¶ÑƒÑ‚ÑŒ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚Ð¸: Ð¿Ñ–Ð´Ð¾Ð·Ñ€Ñ–Ð»Ñ– ÑÐ¿Ñ€Ð¾Ð±Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ñƒ (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð¿Ñ–Ð´Ð±Ñ–Ñ€ Ð¿Ð°Ñ€Ð¾Ð»Ñ), Ð°Ñ‚Ð°ÐºÐ¸ Ñ‚Ð¸Ð¿Ñƒ SQL injection, Ð°Ð±Ð¾ DDOS-Ð¿Ð¾Ð´Ñ–Ð±Ð½Ñƒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ. Ð¦Ðµ Ð´Ð°Ñ” Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ñ–ÑÑ‚ÑŒ Ð²Ñ‡Ð°ÑÐ½Ð¾ Ð·Ñ€ÐµÐ°Ð³ÑƒÐ²Ð°Ñ‚Ð¸!
// âœ… 3. ÐÐ½Ð°Ð»Ñ–Ñ‚Ð¸ÐºÐ° Ñ‚Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
//       ÐœÐ¾Ð¶Ð½Ð° Ð°Ð½Ð°Ð»Ñ–Ð·ÑƒÐ²Ð°Ñ‚Ð¸: ÑÐºÑ– Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸ Ð½Ð°Ð¹Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ–ÑˆÑ–, Ð· ÑÐºÐ¸Ñ… IP-Ð°Ð´Ñ€ÐµÑ Ð½Ð°Ð¹Ñ‡Ð°ÑÑ‚Ñ–ÑˆÐµ Ð·Ð²ÐµÑ€Ñ‚Ð°ÑŽÑ‚ÑŒÑÑ, Ð² ÑÐºÑ– Ð³Ð¾Ð´Ð¸Ð½Ð¸ ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð°Ð¹Ð±Ñ–Ð»ÑŒÑˆ Ð½Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð¸Ð¹.
// âœ… 4. Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ Ð´Ñ–Ð¹
//       Ð›Ð¾Ð³ â€” Ñ†Ðµ ÑÐº Ñ‡Ð¾Ñ€Ð½Ð° ÑÐºÑ€Ð¸Ð½ÑŒÐºÐ°. Ð¯ÐºÑ‰Ð¾ Ñ‰Ð¾ÑÑŒ Ð·Ð»Ð°Ð¼Ð°Ð»Ð¾ÑÑŒ Ð°Ð±Ð¾ ÑÐµÑ€Ð²ÐµÑ€ Ð²Ð¿Ð°Ð², Ð¼Ð¾Ð¶Ð½Ð° Ð´Ñ–Ð·Ð½Ð°Ñ‚Ð¸ÑÑŒ, Ñ‰Ð¾ Ð²Ñ–Ð´Ð±ÑƒÐ²Ð°Ð»Ð¾ÑÑŒ Ð´Ð¾ Ñ†ÑŒÐ¾Ð³Ð¾.
// âœ… 5. Ð—Ð°ÐºÐ¾Ð½Ð¾Ð´Ð°Ð²Ñ‡Ñ– Ð²Ð¸Ð¼Ð¾Ð³Ð¸
//       Ð£ Ð´ÐµÑÐºÐ¸Ñ… ÐºÑ€Ð°Ñ—Ð½Ð°Ñ… Ñ‡Ð¸ ÑÑ„ÐµÑ€Ð°Ñ… (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð±Ð°Ð½ÐºÑ–Ð½Ð³, Ð¾Ñ…Ð¾Ñ€Ð¾Ð½Ð° Ð·Ð´Ð¾Ñ€Ð¾Ð²â€™Ñ) Ð²Ð¸Ð¼Ð¾Ð³Ð¸ Ð±ÐµÐ·Ð¿ÐµÐºÐ¸ Ð·Ð¾Ð±Ð¾Ð²â€™ÑÐ·ÑƒÑŽÑ‚ÑŒ Ð²ÐµÑÑ‚Ð¸ Ð»Ð¾Ð³Ð¸ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ð¾Ðº Ñ‚Ð° Ð°ÑƒÐ´Ð¸Ñ‚Ñ–Ð².
// ðŸ› ï¸ Ð›Ð¾Ð³ÑƒÑŽÑ‚ÑŒ Ñƒ Node.js / Express Ð·Ð°Ð·Ð²Ð¸Ñ‡Ð°Ð¹ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑŽÑ‚ÑŒ Ð±Ñ–Ð±Ð»Ñ–Ð¾Ñ‚ÐµÐºÐ¸:
// [`morgan`](https://www.npmjs.com/package/morgan) â€” Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð³Ð¾ Ð»Ð¾Ð³ÑƒÐ²Ð°Ð½Ð½Ñ HTTP-Ð·Ð°Ð¿Ð¸Ñ‚Ñ–Ð²,
// [`winston`](https://www.npmjs.com/package/winston) â€” Ð´Ð»Ñ Ð³Ð½ÑƒÑ‡ÐºÐ¾Ð³Ð¾ Ð»Ð¾Ð³ÑƒÐ²Ð°Ð½Ð½Ñ Ñƒ Ñ„Ð°Ð¹Ð» Ð°Ð±Ð¾ Ð±Ð°Ð·Ñƒ. 

// ÐšÑ€Ð°Ñ‰Ðµ Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ñ‚Ð¸ Ð»Ð¾Ð³Ð¸ Ð² Ð¾ÐºÑ€ÐµÐ¼Ñ–Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ñ–Ñ—, Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´:
// /logs/logs.txt Ð† Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ñ†ÑŽ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ñ–ÑŽ Ð² .gitignore.
// Ð›Ð¾Ð³ÑƒÐ²Ð°Ñ‚Ð¸ Ð¼Ð¾Ð¶Ð½Ð° Ñ€Ñ–Ð·Ð½Ñ– Ð´Ð°Ð½Ñ– Ð· Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ Ñ‚Ð° Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ñ–, Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´:
//   req.ip â€” IP ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð°
//   req.headers['user-agent'] â€” Ñ‚Ð¸Ð¿ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°
//   ÑÑ‚Ð°Ñ‚ÑƒÑ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ñ– (res.statusCode) â€” Ð°Ð»Ðµ Ð¹Ð¾Ð³Ð¾ Ñ‚Ñ€ÐµÐ±Ð° Ð»Ð¾Ð²Ð¸Ñ‚Ð¸ Ð¿Ñ–ÑÐ»Ñ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ñ–, Ð´Ð»Ñ Ñ†ÑŒÐ¾Ð³Ð¾ Ñ‚Ñ€ÐµÐ±Ð° Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ð¾Ð±Ñ€Ð¾Ð±Ð½Ð¸Ðº res.on('finish', ...)


// ÐžÐ±Ñ€Ð¾Ð±Ð¸Ð¼Ð¾ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ 404, ÑÐºÑ‰Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð·Ð²ÐµÑ€Ñ‚Ð°Ñ”Ñ‚ÑŒÑÑ Ð´Ð¾ Ð½ÐµÑ–ÑÐ½ÑƒÑŽÑ‡Ð¾Ð³Ð¾ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñƒ Ð·Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð¾ÑŽ middleware:
app.use((req, res) => {
    res.status(404).send("<h1>404 - Ð¡Ñ‚Ð¾Ñ€Ñ–Ð½ÐºÑƒ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾!</h1>");
});
// Ð°Ð±Ð¾ Ð¼Ð¾Ð¶Ð½Ð° Ð·Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ñ‚Ð°Ðº:
app.use((req, res) => {
    res.status(404).json({
        error: "Ð¡Ñ‚Ð¾Ñ€Ñ–Ð½ÐºÑƒ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾!",
        status: 404,
        message: "Ð¡Ñ‚Ð¾Ñ€Ñ–Ð½ÐºÐ°, ÑÐºÑƒ Ð²Ð¸ ÑˆÑƒÐºÐ°Ñ”Ñ‚Ðµ, Ð½Ðµ Ñ–ÑÐ½ÑƒÑ”."
    });
});

// Ð©Ðµ Ð·Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð¾ÑŽ middleware Ð¼Ð¾Ð¶Ð½Ð° Ð¾Ð±Ñ€Ð¾Ð±Ð»ÑÑ‚Ð¸ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¸ CORS (Cross-Origin Resource Sharing), Ñ‚Ð¾Ð±Ñ‚Ð¾ Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑ‚Ð¸ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð· Ñ–Ð½ÑˆÐ¸Ñ… Ð´Ð¾Ð¼ÐµÐ½Ñ–Ð². Ð¦Ðµ Ð²Ð°Ð¶Ð»Ð¸Ð²Ð¾, ÑÐºÑ‰Ð¾ Ñ‚Ð²Ñ–Ð¹ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ñ– Ð±ÐµÐºÐµÐ½Ð´ Ñ€Ð¾Ð·Ð¼Ñ–Ñ‰ÐµÐ½Ñ– Ð½Ð° Ñ€Ñ–Ð·Ð½Ð¸Ñ… Ð´Ð¾Ð¼ÐµÐ½Ð°Ñ… Ð°Ð±Ð¾ Ð¿Ð¾Ñ€Ñ‚Ð°Ñ…. ÐÐ°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, ÑÐºÑ‰Ð¾ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ð½Ð° localhost:3000, Ð° Ð±ÐµÐºÐµÐ½Ð´ Ð½Ð° localhost:5000, Ñ‚Ð¾ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð¼Ð¾Ð¶Ðµ Ð±Ð»Ð¾ÐºÑƒÐ²Ð°Ñ‚Ð¸ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ð¾Ð»Ñ–Ñ‚Ð¸ÐºÑƒ Ð±ÐµÐ·Ð¿ÐµÐºÐ¸. Ð©Ð¾Ð± Ñ†ÑŒÐ¾Ð³Ð¾ ÑƒÐ½Ð¸ÐºÐ½ÑƒÑ‚Ð¸, Ð¼Ð¾Ð¶Ð½Ð° Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ middleware Ð´Ð»Ñ Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ CORS:
const cors = require ("cors"); // npm i cors
app.use(cors({
    origin: "http://localhost:3000", // Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ñ‚Ñ–Ð»ÑŒÐºÐ¸ Ð· Ñ†ÑŒÐ¾Ð³Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ñƒ
    methods: ["GET", "POST", "PUT", "DELETE"], // Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ñ†Ñ– Ð¼ÐµÑ‚Ð¾Ð´Ð¸
    credentials: true // Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ñƒ ÐºÑƒÐºÑ–Ð²
})); // Ð¦Ðµ Ð´Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚ÑŒ Ñ‚Ð²Ð¾Ñ”Ð¼Ñƒ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ñƒ Ð½Ð° localhost:3000 Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð´Ð¾ Ð±ÐµÐºÐµÐ½Ð´Ñƒ Ð½Ð° localhost:5000 Ð±ÐµÐ· Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº CORS.
// Ð°Ð±Ð¾ ÑÐºÑ‰Ð¾ Ñ Ñ…Ð¾Ñ‡Ñƒ Ð´Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚Ð¸ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð· ÑƒÑÑ–Ñ… Ð´Ð¾Ð¼ÐµÐ½Ñ–Ð², Ð¼Ð¾Ð¶Ð½Ð° Ð·Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ñ‚Ð°Ðº:
app.use(cors({
    origin: "*", // Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð· ÑƒÑÑ–Ñ… Ð´Ð¾Ð¼ÐµÐ½Ñ–Ð²
    methods: ["GET", "POST", "PUT", "DELETE"], // Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ñ†Ñ– Ð¼ÐµÑ‚Ð¾Ð´Ð¸
    credentials: true // Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ñƒ ÐºÑƒÐºÑ–Ð²
}));
// Ð°Ð±Ð¾ Ñ‚Ð°Ðº:
app.use(cors()); // Ð¦Ðµ Ð´Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð· ÑƒÑÑ–Ñ… Ð´Ð¾Ð¼ÐµÐ½Ñ–Ð² Ñ– Ð²ÑÑ–Ñ… Ð¼ÐµÑ‚Ð¾Ð´Ñ–Ð². ÐÐ»Ðµ Ñ†Ðµ Ð½Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÑ”Ñ‚ÑŒÑÑ Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ð² Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐ½, Ð±Ð¾ Ð¼Ð¾Ð¶Ðµ Ð±ÑƒÑ‚Ð¸ Ð½ÐµÐ±ÐµÐ·Ð¿ÐµÑ‡Ð½Ð¾. ÐšÑ€Ð°Ñ‰Ðµ Ð²ÐºÐ°Ð·ÑƒÐ²Ð°Ñ‚Ð¸ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ– Ð´Ð¾Ð¼ÐµÐ½Ð¸, Ð· ÑÐºÐ¸Ñ… Ð´Ð¾Ð·Ð²Ð¾Ð»ÐµÐ½Ñ– Ð·Ð°Ð¿Ð¸Ñ‚Ð¸.



// ÐÐµ Ð·Ñ€ÑƒÑ‡Ð½Ð¾ Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ð²ÑÑ– Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð² app.js, Ñ‚Ð¾Ð¼Ñƒ ÑÑ‚Ð²Ð¾Ñ€ÑŽÑ”Ð¼Ð¾ Ð¾ÐºÑ€ÐµÐ¼Ð¸Ð¹ Ñ„Ð°Ð¹Ð» Ð´Ð»Ñ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð· REST API, Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, routes/api/books.js (Ð´Ð»Ñ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ Ñ€ÐµÑÑƒÑ€ÑÑƒ Ð¼Ð¾Ð¶Ð½Ð° ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ Ð¾ÐºÑ€ÐµÐ¼Ð¸Ð¹ Ñ„Ð°Ð¹Ð», Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, books.js, users.js Ñ– Ñ‚.Ð´.).
// routes/api/books.js
const express = require("express");
const router = express.Router(); // app - Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐµÑ‚ÑŒÑÑ Ñ‚Ñ–Ð»ÑŒÐºÐ¸ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÑƒ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ñƒ, Ð° ÑÐºÐ·Ñ‰Ð¾ Ð¼Ð¸ Ñ…Ð¾Ñ‡ÐµÐ¼Ð¾ ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ Ð¾ÐºÑ€ÐµÐ¼Ð¸Ð¹ Ñ€Ð¾ÑƒÑ‚ÐµÑ€ Ð´Ð»Ñ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð· API, Ñ‚Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ð¼Ð¾ express.Router().
const books = require("../../data/books.json"); // ÐŸÑ€Ð¸Ð¿ÑƒÑÑ‚Ð¸Ð¼Ð¾, Ñ‰Ð¾ Ñƒ Ð½Ð°Ñ Ñ” Ñ„Ð°Ð¹Ð» books.json Ð· Ð´Ð°Ð½Ð¸Ð¼Ð¸ ÐºÐ½Ð¸Ð³.
router.get("/", (req, res) => { // ÐžÑ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ Ð²ÑÑ–Ñ… ÐºÐ½Ð¸Ð³
    res.json(books); // Ð’Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ”Ð¼Ð¾ Ð¼Ð°ÑÐ¸Ð² ÐºÐ½Ð¸Ð³ Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– JSON
});
router.get("/:id", (req, res) => { // ÐžÑ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ ÐºÐ½Ð¸Ð³Ð¸ Ð·Ð° ID
    req.json(books[0]); // ÐžÑ‚Ñ€Ð¸Ð¼ÑƒÑ”Ð¼Ð¾ ID ÐºÐ½Ð¸Ð³Ð¸ Ð· Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ–Ð² URL
});

module.exports = router; // Ð•ÐºÑÐ¿Ð¾Ñ€Ñ‚ÑƒÑ”Ð¼Ð¾ Ñ€Ð¾ÑƒÑ‚ÐµÑ€, Ñ‰Ð¾Ð± Ð¹Ð¾Ð³Ð¾ Ð¼Ð¾Ð¶Ð½Ð° Ð±ÑƒÐ»Ð¾ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ð² Ñ–Ð½ÑˆÐ¸Ñ… Ñ„Ð°Ð¹Ð»Ð°Ñ….

// app.js
import express from "express";
const cors = require("cors");
import booksRouter from "./routes/api/books.js"; // Ð†Ð¼Ð¿Ð¾Ñ€Ñ‚ÑƒÑ”Ð¼Ð¾ Ñ€Ð¾ÑƒÑ‚ÐµÑ€ Ð´Ð»Ñ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸ Ð· ÐºÐ½Ð¸Ð³Ð°Ð¼Ð¸
// const app = express();
app.use(cors()); // Ð”Ð¾Ð´Ð°Ñ”Ð¼Ð¾ CORS, Ñ‰Ð¾Ð± Ð´Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚Ð¸ Ð·Ð°Ð¿Ð¸Ñ‚Ð¸ Ð· Ñ–Ð½ÑˆÐ¸Ñ… Ð´Ð¾Ð¼ÐµÐ½Ñ–Ð²
app.use(express.json()); // Ð”Ð¾Ð´Ð°Ñ”Ð¼Ð¾ middleware Ð´Ð»Ñ Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ JSON-Ñ‚ bodies Ð·Ð°Ð¿Ð¸Ñ‚
app.use("/api/books", booksRouter); // Ð¯ÐºÑ‰Ð¾ Ð·Ð°Ð¿Ð¸Ñ‚ Ð´Ð¾ API Ð¿Ð¾Ñ‡Ð¸Ð½Ð°Ð»Ð¸ÑÑ Ð· /api/books, Ñ‚Ð¾ Ñ‚Ð¾ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´ÑŒ ÑˆÑƒÐºÐ°Ð¹ Ð² booksRouter, Ñ‚Ð¾Ð±Ñ‚Ð¾ Ð² routes/api/books.js
app.use((req, res) => { // Ð¯ÐºÑ‰Ð¾ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾ Ð¶Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñƒ, Ñ‚Ð¾ Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ”Ð¼Ð¾ 404
    res.status(404).json({ message: "Not Found" });
});
// Ð—Ð°Ð¿ÑƒÑÐºÐ°Ñ”Ð¼Ð¾ ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 3000
app.listen(3000, () => {
    console.log("Server running on http://localhost:3000");
});


// Ð¼ÐµÑ‚Ð¾Ð´Ð¸ HTTP Ð´Ð»Ñ REST API:
// 1. GET â€” Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ Ð´Ð°Ð½Ð¸Ñ… (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, ÑÐ¿Ð¸ÑÐ¾Ðº ÐºÐ½Ð¸Ð³)
router.get("/", async (req, res) => {
    try {
        const data = await readFile("./books.json", "utf-8");
        const books = JSON.parse(data); // ÐŸÐµÑ€ÐµÑ‚Ð²Ð¾Ñ€ÑŽÑ”Ð¼Ð¾ Ñ‚ÐµÐºÑÑ‚ JSON Ñƒ Ð¼Ð°ÑÐ¸Ð² Ð¾Ð±'Ñ”ÐºÑ‚Ñ–Ð²
        res.json(books); // Ð’Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ”Ð¼Ð¾ Ð¼Ð°ÑÐ¸Ð² ÐºÐ½Ð¸Ð³ Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– JSON
    } catch (error) {
        return res.status(500).json({ message: "ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°" }); // Ð¯ÐºÑ‰Ð¾ ÑÑ‚Ð°Ð»Ð°ÑÑ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ°, Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ”Ð¼Ð¾ 500
    }
});

// Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ð½Ð½Ñ ÐºÐ½Ð¸Ð³Ð¸ Ð·Ð° ID
router.get("/:id", async (req, res) => {
    try {
        const data = await readFile("./books.json", "utf-8");
        const books = JSON.parse(data);
        const book = books.find(b => b.id === parseInt(req.params.id));
        if (!book) {
            throw HttpError(404, `ÐšÐ½Ð¸Ð³Ð° Ð· ID ${req.params.id} Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð°`); // Ð’Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÑ”Ð¼Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ñ–ÑŽ HttpError Ð´Ð»Ñ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¸. req.params - Ñ†Ðµ Ð¾Ð±'Ñ”ÐºÑ‚, ÑÐºÐ¸Ð¹ Ð¼Ñ–ÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñƒ, Ð² Ð´Ð°Ð½Ð½Ð¾Ð¼Ñƒ Ð²Ð¸Ð¿Ð°Ð´ÐºÑƒ Ñ†Ðµ ID ÐºÐ½Ð¸Ð³Ð¸, ÑÐºÑƒ Ð¼Ð¸ ÑˆÑƒÐºÐ°Ñ”Ð¼Ð¾.
            // Ð°Ð±Ð¾ Ð¼Ð¾Ð¶Ð½Ð° Ð·Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ñ‚Ð°Ðº:
            // const error = new Error("ÐšÐ½Ð¸Ð³Ð° Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð°");
            // error.status = 404; // Ð’ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÑŽÑ”Ð¼Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑ 404, ÑÐºÑ‰Ð¾ ÐºÐ½Ð¸Ð³Ð° Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð°
            // throw error; // Ð“ÐµÐ½ÐµÑ€ÑƒÑ”Ð¼Ð¾ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ, Ñ‰Ð¾Ð± Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚Ð¸ Ñ—Ñ— Ð´Ð°Ð»Ñ– Ð² middleware Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº
        } // Ñ†ÑŽ Ð¿ÐµÑ€ÐµÐ²Ñ–Ð¾ÐºÑƒ Ð¼Ð¸ Ð¼Ð¾Ð¶ÐºÐ¼Ð¾ Ð²Ð¸Ð½ÐµÑÑ‚Ð¸ Ð² Ð¾ÐºÑ€ÐµÐ¼Ð¸Ð¹ Ñ„Ð°Ð¹Ð» helper.js (Ð´Ð¸Ð²Ð¸ÑÑŒ Ð½Ð¸Ð¶Ñ‡Ðµ), Ñ‰Ð¾Ð± Ð½Ðµ Ð´ÑƒÐ±Ð»ÑŽÐ²Ð°Ñ‚Ð¸ ÐºÐ¾Ð´ Ð² ÐºÐ¾Ð¶Ð½Ð¾Ð¼Ñƒ Ñ€Ð¾ÑƒÑ‚Ñ–
        res.json(book);
    } catch (error) {
        // return res.status(500).json({ message: "ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°" }); // Ð·Ð°Ð¼Ñ–ÑÑ‚ÑŒ Ð¾Ð±Ñ€Ð¾Ð±Ð»ÐµÐ½Ð½Ñ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¸ Ð¼Ð¸ Ð¼Ð¾Ð¶ÐµÐ¼ Ð² Ð½Ð°ÑˆÐ¾Ð¼Ñƒ get Ð·Ð°Ð¿Ð¸Ñ‚Ñ– Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚Ð¸ Ñ‚Ñ€ÐµÑ‚Ñ–Ð¹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ next Ñ– Ñ‚ÑƒÑ‚ Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ñ‚Ð¸ next Ð· Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð¼ error 
        next(error); // next(error) - ÑˆÑƒÐºÐ°Ñ” Ð¾Ð±Ñ€Ð¾Ð±Ð½Ð¸Ðº Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº, ÑÐºÐ¸Ð¹ Ð¼Ð°Ñ” Ñ‡Ð¾Ñ‚Ð¸Ñ€Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸ (err, req, res, next). Ð¯ÐºÑ‰Ð¾ Ñ‚Ð°ÐºÐ¸Ð¹ Ð¾Ð±Ñ€Ð¾Ð±Ð½Ð¸Ðº Ð·Ð½Ð°Ð¹Ð´ÐµÑ‚ÑŒÑÑ, Ñ‚Ð¾ Ð²Ñ–Ð½ Ð±ÑƒÐ´Ðµ Ð²Ð¸ÐºÐ»Ð¸ÐºÐ°Ð½Ð¸Ð¹ Ð· Ð¿ÐµÑ€ÐµÐ´Ð°Ð½Ð¾ÑŽ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¾ÑŽ. Ð¯ÐºÑ‰Ð¾ Ð½Ñ–, Ñ‚Ð¾ Express Ð²Ñ–Ð´Ð´Ð°ÑÑ‚ÑŒ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñƒ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ 500. 
    }
});

// 2. POST â€” ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ð½Ð¾Ð²Ð¸Ñ… Ð´Ð°Ð½Ð¸Ñ… (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ð½Ð¾Ð²Ð¾Ñ— ÐºÐ½Ð¸Ð³Ð¸)
app.use(express.json()); // Ð”Ð¾Ð´Ð°Ñ”Ð¼Ð¾ middleware Ð´Ð»Ñ Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ JSON-Ñ‚ bodies Ð·Ð°Ð¿Ð¸Ñ‚Ñ–Ð²
// Ð¦Ðµ Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑ” Ð½Ð°Ð¼ Ð¾Ñ‚Ñ€Ð¸Ð¼ÑƒÐ²Ð°Ñ‚Ð¸ Ð´Ð°Ð½Ñ– Ð· Ñ‚Ñ–Ð»Ð° Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ (req.body), ÑÐºÑ‰Ð¾ Ð½Ðµ Ð±ÑƒÐ¶Ðµ Ñ†Ð±Ð¾Ð³Ð¾ middleware, Ñ‚Ð¾ req.body Ð±ÑƒÐ´Ðµ undefined Ñ– Ð¼Ð¸ Ð½Ðµ Ð·Ð¼Ð¾Ð¶ÐµÐ¼Ð¾ Ð¾Ñ‚Ñ€Ð¸Ð¼Ð°Ñ‚Ð¸ Ð´Ð°Ð½Ñ– Ð· Ñ‚Ñ–Ð»Ð° Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ.

//Ð”Ð»Ñ Ñ‚Ð¾Ð³Ð¾ Ñ‰Ð¾Ð± Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ñ‚Ð¸ Ñ‡Ð¸ Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– Ð½Ð°Ð¼ Ð¿Ñ€Ð¸Ð¹ÑˆÐ»Ð¸ Ð´Ð°Ð½Ñ– Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð°Ñ”Ð¼Ð¾ Ð±Ñ–ÑŒÐ»Ñ–Ð¾Ñ‚ÐµÐºÑƒ Joi, ÑÐºÐ° Ð´Ð¾Ð·Ð²Ð¾Ð»ÑÑ” ÑÑ‚Ð²Ð¾Ñ€ÑŽÐ²Ð°Ñ‚Ð¸ ÑÑ…ÐµÐ¼Ð¸ Ð²Ð°Ð»Ñ–Ð´Ð°Ñ†Ñ–Ñ— Ð´Ð»Ñ Ð¾Ð±'Ñ”ÐºÑ‚Ñ–Ð². Ð’Ð¾Ð½Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð°Ð³Ð°Ñ” Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÑÑ‚Ð¸, Ñ‡Ð¸ Ð´Ð°Ð½Ñ– Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°ÑŽÑ‚ÑŒ Ð¾Ñ‡Ñ–ÐºÑƒÐ²Ð°Ð½Ð¾Ð¼Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñƒ, Ñ– Ð²Ð¸Ð´Ð°Ñ” Ð¿Ð¾Ð¼Ð¸Ð»ÐºÐ¸, ÑÐºÑ‰Ð¾ Ñ‰Ð¾ÑÑŒ Ð½Ðµ Ñ‚Ð°Ðº.
// import Joi = require("joi"); // npm i joi
const bookAddSchema = Joi.object({ // Ð¡Ñ‚Ð²Ð¾Ñ€ÑŽÑ”Ð¼Ð¾ ÑÑ…ÐµÐ¼Ñƒ Ð²Ð°Ð»Ñ–Ð´Ð°Ñ†Ñ–Ñ— Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ñ— ÐºÐ½Ð¸Ð³Ð¸
    title: Joi.string().min(3).required(), // ÐÐ°Ð·Ð²Ð° ÐºÐ½Ð¸Ð³Ð¸ Ð¼Ð°Ñ” Ð±ÑƒÑ‚Ð¸ Ñ€ÑÐ´ÐºÐ¾Ð¼, Ð¼Ñ–Ð½Ñ–Ð¼ÑƒÐ¼ 3 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸, Ð¾Ð±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ðµ Ð¿Ð¾Ð»Ðµ
    author: Joi.string().required(), // ÐÐ²Ñ‚Ð¾Ñ€ Ð¼Ð°Ñ” Ð±ÑƒÑ‚Ð¸ Ñ€ÑÐ´ÐºÐ¾Ð¼, Ð¼Ñ–Ð½Ñ–Ð¼ÑƒÐ¼ 3 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¸, Ð¾Ð±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ðµ Ð¿Ð¾Ð»Ðµ
    year: Joi.number().min(1000).max(9999).required() // Ð Ñ–Ðº Ð¼Ð°Ñ” Ð±ÑƒÑ‚Ð¸ Ñ‡Ð¸ÑÐ»Ð¾Ð¼, Ð² Ð´Ñ–Ð°Ð¿Ð°Ð·Ð¾Ð½Ñ– Ð²Ñ–Ð´ 1000 Ð´Ð¾ 9999, Ð¾Ð±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ðµ Ð¿Ð¾Ð»Ðµ
});
router.post("/", async (req, res, next) => {
    try {
        const { error } = bookAddSchema.validate(req.body); // Ð’Ð°Ð»Ñ–Ð´Ð°Ñ†Ñ–Ñ Ð´Ð°Ð½Ð¸Ñ… Ð· Ñ‚Ñ–Ð»Ð° Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ
        if(error) {
            throw HttpError(400, error.message); // Ð¯ÐºÑ‰Ð¾ Ð´Ð°Ð½Ñ– Ð½Ðµ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°ÑŽÑ‚ÑŒ ÑÑ…ÐµÐ¼Ñ–, ÐºÐ¸Ð´Ð°Ñ”Ð¼Ð¾ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ 400 (Bad Request)
        }
        // console.log(req.body); // req.body Ð¼Ñ–ÑÑ‚Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ñ–, ÑÐºÑ– Ð±ÑƒÐ»Ð¸ Ð½Ð°Ð´Ñ–ÑÐ»Ð°Ð½Ñ– Ð² Ñ‚Ñ–Ð»Ñ– Ð·Ð°Ð¿Ð¸Ñ‚Ñƒ (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð¿Ñ€Ð¸ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ– Ð½Ð¾Ð²Ð¾Ñ— ÐºÐ½Ð¸Ð³Ð¸)`);
        const newBook = await readFile("./books.json", "utf-8");
        const books = JSON.parse(newBook); // ÐŸÐµÑ€ÐµÑ‚Ð²Ð¾Ñ€ÑŽÑ”Ð¼Ð¾ Ñ‚ÐµÐºÑÑ‚ JSON Ñƒ Ð¼Ð°ÑÐ¸Ð² Ð¾Ð±'Ñ”ÐºÑ‚Ñ–Ð²
        const book = {
            id: books.length + 1,
            title: req.body.title,
            author: req.body.author,
            year: req.body.year
        };
        books.push(book);
        await writeFile("./books.json", JSON.stringify(books, null, 2));
        res.status(201).json(book); // Ð¿ÐµÑ€ÐµÐ´Ð°Ñ”Ð¼ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€ ÑÑ‚ÑƒÑ‚ÑƒÑ 201 (Created) Ñ– Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ”Ð¼Ð¾ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ñƒ ÐºÐ½Ð¸Ð³Ñƒ Ñƒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ñ– JSON
    } catch (error) {
        next(error); // ÐŸÐµÑ€ÐµÐ´Ð°Ñ”Ð¼Ð¾ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ Ð´Ð°Ð»Ñ– Ð² middleware Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº
    }
})

// 3. PUT â€” Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ñ–ÑÐ½ÑƒÑŽÑ‡Ð¸Ñ… Ð´Ð°Ð½Ð¸Ñ… (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð·Ð¼Ñ–Ð½Ð° Ñ–Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ— Ð¿Ñ€Ð¾ ÐºÐ½Ð¸Ð³Ñƒ)
router.put("/:id", async (req, res, next) => {
    try {
       const { error } = bookAddSchema.validate(req.body);
        if(error) {
            throw HttpError(400, error.message);
        }
        const { id } = req.params; // ÐžÑ‚Ñ€Ð¸Ð¼ÑƒÑ”Ð¼Ð¾ ID ÐºÐ½Ð¸Ð³Ð¸ Ð· Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ–Ð² URL
        const data = await readFile("./books.json", "utf-8");
        const books = JSON.parse(data);
        const bookIndex = books.findIndex(b => b.id === parseInt(id)); // Ð—
        }
    catch (error) {
        next(error); // ÐŸÐµÑ€ÐµÐ´Ð°Ñ”Ð¼Ð¾ Ð¿Ð¾Ð¼Ð¸Ð»ÐºÑƒ Ð´Ð°Ð»Ñ– Ð² middleware Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº
    }
});

// 4. DELETE â€” Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ Ð´Ð°Ð½Ð¸Ñ… (Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ ÐºÐ½Ð¸Ð³Ð¸) 
router.delete("/:id", async (req, res, next) => {
    try {
        const { id } = req.params; // ÐžÑ‚Ñ€Ð¸Ð¼ÑƒÑ”Ð¼Ð¾ ID ÐºÐ½Ð¸Ð³Ð¸ Ð· Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ–Ð² URL
        const data = await readFile("./books.json", "utf-8");
        const books = JSON.parse(data);
        const bookIndex = books.findIndex(b => b.id === parseInt(id));
        if (bookIndex === -1) {
            throw HttpError(404, `ÐšÐ½Ð¸Ð³Ð° Ð· ID ${id} Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð°`);
        }
        books.splice(bookIndex, 1); // Ð’Ð¸Ð´Ð°Ð»ÑÑ”Ð¼Ð¾ ÐºÐ½Ð¸Ð³Ñƒ Ð· Ð¼Ð°ÑÐ¸Ð²Ñƒ
        await writeFile("./books.json", JSON.stringify(books, null, 2));
        res.status(204).send(); // Ð’Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÑÑ”Ð¼Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑ 204 (No Content) Ð±ÐµÐ· Ñ‚Ñ–Ð»Ð° Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ñ–
        res.json({ message: "ÐšÐ½Ð¸Ð³Ð° Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð°" }); // ÐÐ±Ð¾ Ð¼Ð¾Ð¶Ð½Ð° Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð¸Ñ‚Ð¸ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾ ÑƒÑÐ¿Ñ–ÑˆÐ½Ðµ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ        
    } catch (error) {
        next(error);
    }
});


// helper/ HttpError.js
const HttpError = (status, message) => {
    const error = new Error(message);
    error.status = status;
    return error;
};
